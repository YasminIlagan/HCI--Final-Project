<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luna - Women's Wellness Companion</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Modern Website Styling with Enhanced HCI */
        :root {
            --primary: #8B7BA8;
            --secondary: #B5A5D5;
            --accent: #6B5B8C;
            --light: #F8F5FB;
            --white: #ffffff;
            --text: #2a2a2a;
            --shadow: rgba(107, 91, 140, 0.15);
            --gradient-1: linear-gradient(135deg, #D4C8E8 0%, #B5A5D5 50%, #9B8DB5 100%);
            --gradient-2: linear-gradient(135deg, #E8B5D8 0%, #D4C8E8 100%);
            --gradient-3: linear-gradient(135deg, #B5A5D5 0%, #8B7BA8 100%);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        ::selection {
            background: var(--secondary);
            color: white;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--gradient-1);
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(232, 181, 216, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(181, 165, 213, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Navigation Bar */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 5%;
            box-shadow: 0 2px 20px var(--shadow);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.5s ease-out;
            transition: all 0.3s ease;
        }
        
        .top-nav:hover {
            box-shadow: 0 4px 30px var(--shadow);
        }
        
        .top-nav.logged-out .nav-links a:not([onclick*="welcome"]) {
            opacity: 0.5;
            pointer-events: none;
            cursor: not-allowed;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            transition: transform 0.3s ease;
            animation: float 3s ease-in-out infinite;
        }
        
        .logo-img:hover {
            transform: rotate(360deg) scale(1.1);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent);
            font-family: 'Georgia', serif;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover {
            background: var(--light);
            color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }
        
        .nav-link:hover::before {
            width: 80%;
        }

        .nav-link.active {
            background: var(--primary);
            color: white;
        }

        /* Main Container */
        .container {
            width: 100%;
            max-width: 100%;
            margin: 140px 0 0 0;
            padding: 0;
        }

        /* Screen Container */
        .screen-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 5rem 5% 3rem 5%;
            box-shadow: 0 2px 20px var(--shadow);
            min-height: calc(100vh - 140px);
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 2rem 0;
            animation: fadeIn 1s ease-out;
        }

        .logo-large {
            width: 150px;
            height: 150px;
            margin: 0 auto 2rem;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(107, 91, 140, 0.3));
            transition: filter 0.3s ease;
        }
        
        .logo-large:hover {
            filter: drop-shadow(0 15px 30px rgba(107, 91, 140, 0.5));
            animation: pulse 0.5s ease-in-out;
        }

        .welcome-title {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 1rem;
            font-family: 'Georgia', serif;
            animation: fadeIn 1.2s ease-out;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 3rem;
            animation: fadeIn 1.4s ease-out;
        }

        .cta-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 30px rgba(107, 91, 140, 0.3);
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }
        
        .btn-primary:active {
            transform: translateY(-1px) scale(0.98);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--light);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 20px var(--shadow);
        }
        
        .btn-secondary:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        /* Back Button */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--light);
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .back-button::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .back-button:hover {
            background: var(--primary);
            color: white;
            transform: translateX(-8px);
            box-shadow: 0 4px 20px rgba(107, 91, 140, 0.3);
        }
        
        .back-button:hover::before {
            left: 100%;
        }
        
        .back-button:active {
            transform: translateX(-5px) scale(0.95);
        }

        /* Home Dashboard */
        .dashboard {
            display: grid;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
            animation: fadeIn 0.8s ease-out;
            background: linear-gradient(135deg, var(--accent), var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .mood-section {
            background: var(--light);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 5px 20px var(--shadow);
            transition: all 0.3s ease;
            animation: fadeIn 1s ease-out;
        }
        
        .mood-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(107, 91, 140, 0.25);
        }

        .mood-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .mood-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            font-size: 2.2rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        .mood-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .mood-btn:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .mood-btn:active {
            transform: scale(1.05);
        }
        
        .mood-btn:active::after {
            width: 100%;
            height: 100%;
        }
        
        /* Mood Quote Popup */
        .mood-quote-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2.5rem;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 10000;
            max-width: 500px;
            width: 90%;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .mood-quote-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }
        
        .mood-quote-emoji {
            font-size: 5rem;
            margin-bottom: 1rem;
            animation: float 3s ease-in-out infinite;
        }
        
        .mood-quote-text {
            font-size: 1.3rem;
            line-height: 1.8;
            font-style: italic;
            margin: 1.5rem 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .mood-quote-close {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 1rem;
        }
        
        .mood-quote-close:hover {
            background: white;
            color: var(--primary);
            transform: scale(1.05);
        }
        
        .mood-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .mood-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .water-tracker {
            display: flex;
            align-items: center;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        .water-icon {
            font-size: 2rem;
        }

        .slider {
            width: 300px;
            height: 12px;
            border-radius: 6px;
            background: linear-gradient(to right, #E8F5E9 0%, #81C784 100%);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .slider:hover {
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.15), 0 2px 10px var(--shadow);
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(107, 91, 140, 0.3);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 5px 15px rgba(107, 91, 140, 0.5);
        }
        
        .slider::-webkit-slider-thumb:active {
            transform: scale(1.1);
        }
        
        .slider::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            cursor: pointer;
            border: none;
            box-shadow: 0 3px 10px rgba(107, 91, 140, 0.3);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .slider::-moz-range-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 5px 15px rgba(107, 91, 140, 0.5);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }
        
        @media (max-width: 1200px) {
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
        }

        .feature-title {
            font-size: 1.3rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .feature-desc {
            color: #666;
            font-size: 0.9rem;
        }

        /* Forms */
        .auth-form {
            max-width: 450px;
            margin: 2rem auto;
            animation: fadeIn 0.6s ease-out;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 30px;
            box-shadow: 0 10px 40px var(--shadow);
        }

        .form-group {
            margin-bottom: 1.5rem;
            animation: fadeIn 0.8s ease-out backwards;
        }
        
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--accent);
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(155, 141, 181, 0.15);
            transform: translateY(-2px);
        }
        
        .form-input:hover:not(:focus) {
            border-color: var(--secondary);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Period Tracker */
        .calendar-container {
            background: var(--light);
            padding: 2rem;
            border-radius: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 1rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .calendar-day::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.3);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .calendar-day:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .calendar-day:hover::after {
            opacity: 1;
        }
        
        .calendar-day:active {
            transform: scale(1.05);
        }

        /* Sleep Tracker */
        .sleep-circle {
            width: 300px;
            height: 300px;
            margin: 2rem auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sleep-info {
            text-align: center;
        }

        .sleep-hours {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        /* Journal */
        .journal-area {
            width: 100%;
            min-height: 300px;
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
            resize: vertical;
        }

        .journal-area:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Settings */
        .settings-list {
            display: grid;
            gap: 1rem;
        }

        .setting-item {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }
        
        .setting-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .setting-item:hover {
            background: white;
            transform: translateX(8px);
            box-shadow: 0 4px 20px rgba(107, 91, 140, 0.15);
        }
        
        .setting-item:hover::before {
            transform: scaleY(1);
        }
        
        .setting-item:active {
            transform: translateX(5px) scale(0.98);
        }

        /* Logout Button in Nav */
        .logout-nav-btn {
            background: linear-gradient(135deg, #E74C3C, #C0392B);
            color: white;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 2px 10px rgba(231, 76, 60, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .logout-nav-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .logout-nav-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
            background: linear-gradient(135deg, #C0392B, #E74C3C);
        }
        
        .logout-nav-btn:active {
            transform: translateY(-1px) scale(0.95);
        }
        
        .logout-nav-btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Responsive Design - Mobile First Approach */
        @media (max-width: 768px) {
            .top-nav {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem 2rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.8rem;
            }
            
            .nav-link {
                font-size: 0.9rem;
                padding: 0.5rem 1rem;
            }

            .welcome-title {
                font-size: 2rem !important;
            }
            
            .welcome-subtitle {
                font-size: 1rem !important;
            }

            .screen-container {
                padding: 1.5rem 5%;
            }
            
            .cta-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr !important;
            }
            
            .logo-img {
                width: 40px;
                height: 40px;
            }
            
            .logo-text {
                font-size: 1.4rem;
            }
        }
        
        /* Tablet Responsive */
        @media (min-width: 769px) and (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .screen-container {
                padding: 2rem 5%;
            }
        }
        
        /* Desktop Optimization */
        @media (min-width: 1025px) {
            .container {
                max-width: 1400px;
                margin: 0 auto;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success/Error Messages */
        .message {
            padding: 1.2rem 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            animation: slideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }
        
        .message::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: currentColor;
        }

        .message.success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .message.success::after {
            content: '‚úì';
            font-size: 1.5rem;
            font-weight: bold;
        }

        .message.error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .message.error::after {
            content: '‚úï';
            font-size: 1.5rem;
            font-weight: bold;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        /* Accessibility & Focus States */
        *:focus {
            outline: 3px solid var(--secondary);
            outline-offset: 3px;
        }
        
        button:focus,
        input:focus,
        textarea:focus,
        select:focus {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }
        
        /* Smooth Entrance Animations for Cards */
        .mood-section,
        .auth-form,
        .calendar-container,
        .setting-item {
            animation: fadeIn 0.6s ease-out backwards;
        }
        
        /* Cursor Enhancement */
        button, 
        a, 
        .nav-link,
        .mood-btn,
        .calendar-day,
        .setting-item {
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Reduced Motion for Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Print Styles */
        @media print {
            .top-nav,
            .back-button,
            button {
                display: none;
            }
            
            body {
                background: white;
            }
            
            .screen-container {
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <!-- Mood Quote Popup -->
    <div class="mood-overlay" id="moodOverlay" onclick="closeQuote()"></div>
    <div class="mood-quote-popup" id="moodQuotePopup" onmouseenter="isPopupHovered = true; clearTimeout(quoteTimeout);" onmouseleave="isPopupHovered = false; hideMoodQuote();">
        <div class="mood-quote-emoji" id="quoteEmoji">üòä</div>
        <div class="mood-quote-text" id="quoteText">"You are doing great!"</div>
        <button class="mood-quote-close" onclick="closeQuote()">Close</button>
    </div>
    
    <!-- Top Navigation - Semantic HTML with ARIA labels -->
    <nav class="top-nav logged-out" id="main-nav" role="navigation" aria-label="Main navigation">
        <div class="logo-section">
            <img src="assets/moon-logo.png" alt="Luna Logo - Women's Wellness App" class="logo-img">
            <span class="logo-text" aria-label="Luna - Your wellness companion">Luna</span>
        </div>
        <div class="nav-links" role="menubar">
            <a href="#home" class="nav-link" onclick="showScreen('welcome'); return false;" role="menuitem" aria-label="Navigate to home page">Home</a>
            <a href="#dashboard" class="nav-link" onclick="showScreen('dashboard'); return false;" role="menuitem" aria-label="Navigate to dashboard">Dashboard</a>
            <a href="#analytics" class="nav-link" onclick="showScreen('analytics'); return false;" role="menuitem" aria-label="Navigate to data analytics">Data Analytics</a>
            <a href="#notifications" class="nav-link" onclick="showScreen('notifications'); return false;" role="menuitem" aria-label="View notifications">Notifications</a>
            <a href="#profile" class="nav-link" onclick="showScreen('profile'); return false;" role="menuitem" aria-label="View your profile">Profile</a>
            <button class="logout-nav-btn" id="logout-btn" style="display: none;" onclick="logout()" aria-label="Log out from your account">Log Out</button>
        </div>
    </nav>

    <!-- Main Container - Semantic HTML -->
    <main class="container" role="main" aria-label="Main content area">
        <section class="screen-container" id="main-content" aria-live="polite">
            <!-- Content will be dynamically loaded here -->
        </section>
    </main>

    <script>
        // Global state
        let currentUser = null;
        let moodData = [];
        let journalEntries = [];
        let sleepData = [];
        let sleepGoal = 8; // Default sleep goal in hours
        let periodSymptoms = []; // Store period symptoms data
        let customWellnessTips = []; // Store custom wellness tips

        // Mood quotes for each emotion
        const moodQuotes = {
            sad: {
                emoji: 'üò¢',
                quotes: [
                    "It's okay to not be okay. Take your time to heal.",
                    "Even the darkest night will end and the sun will rise.",
                    "Your feelings are valid. Be gentle with yourself.",
                    "This too shall pass. You are stronger than you know.",
                    "It's okay to take a break and focus on yourself."
                ]
            },
            bad: {
                emoji: 'üòü',
                quotes: [
                    "Tough times don't last, but tough people do.",
                    "Every storm runs out of rain. Better days are coming.",
                    "You've survived 100% of your bad days so far.",
                    "Take a deep breath. You can handle this.",
                    "Progress, not perfection. Keep going."
                ]
            },
            okay: {
                emoji: 'üòê',
                quotes: [
                    "Okay is okay. Not every day has to be perfect.",
                    "Balance is key. You're doing just fine.",
                    "Neutral days are part of life's beautiful rhythm.",
                    "Sometimes okay is more than enough.",
                    "Give yourself credit for showing up today."
                ]
            },
            good: {
                emoji: 'üòä',
                quotes: [
                    "Your positive energy is contagious! Keep shining!",
                    "Good vibes only! You're doing amazing!",
                    "Celebrate this moment of happiness!",
                    "Your smile can change the world. Keep smiling!",
                    "Happiness looks good on you!"
                ]
            },
            great: {
                emoji: 'üòÑ',
                quotes: [
                    "You're radiating pure joy! Keep that energy flowing!",
                    "Life is beautiful, and so are you!",
                    "Your happiness is inspiring! Share that light!",
                    "Amazing things happen when you're in a great mood!",
                    "You're unstoppable today! Keep soaring!"
                ]
            }
        };
        
        let quoteTimeout;
        let isPopupHovered = false;
        
        function showMoodQuote(mood) {
            clearTimeout(quoteTimeout);
            const moodData = moodQuotes[mood];
            const randomQuote = moodData.quotes[Math.floor(Math.random() * moodData.quotes.length)];
            
            document.getElementById('quoteEmoji').textContent = moodData.emoji;
            document.getElementById('quoteText').textContent = `"${randomQuote}"`;
            
            const overlay = document.getElementById('moodOverlay');
            const popup = document.getElementById('moodQuotePopup');
            
            overlay.classList.add('show');
            popup.classList.add('show');
        }
        
        function hideMoodQuote() {
            quoteTimeout = setTimeout(() => {
                if (!isPopupHovered) {
                    const overlay = document.getElementById('moodOverlay');
                    const popup = document.getElementById('moodQuotePopup');
                    
                    overlay.classList.remove('show');
                    popup.classList.remove('show');
                }
            }, 300);
        }
        
        function closeQuote() {
            clearTimeout(quoteTimeout);
            const overlay = document.getElementById('moodOverlay');
            const popup = document.getElementById('moodQuotePopup');
            
            overlay.classList.remove('show');
            popup.classList.remove('show');
            isPopupHovered = false;
        }

        // Navigation function
        function showScreen(screen) {
            const content = document.getElementById('main-content');
            const nav = document.getElementById('main-nav');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Show/hide nav based on screen
            if (screen === 'welcome' || screen === 'signin' || screen === 'signup') {
                nav.style.display = 'none';
            } else {
                nav.style.display = 'flex';
            }

            // Render appropriate screen
            switch(screen) {
                case 'welcome':
                    content.innerHTML = renderWelcome();
                    break;
                case 'signin':
                    content.innerHTML = renderSignIn();
                    break;
                case 'signup':
                    content.innerHTML = renderSignUp();
                    break;
                case 'dashboard':
                    content.innerHTML = renderDashboard();
                    break;
                case 'period':
                    content.innerHTML = renderPeriodTracker();
                    break;
                case 'sleep':
                    content.innerHTML = renderSleepTracker();
                    break;
                case 'wellness':
                    content.innerHTML = renderWellness();
                    break;
                case 'journal':
                    content.innerHTML = renderJournal();
                    break;
                case 'settings':
                    content.innerHTML = renderSettings();
                    break;
                case 'analytics':
                    content.innerHTML = renderAnalytics();
                    setTimeout(renderSleepChart, 100);
                    break;
                case 'notifications':
                    content.innerHTML = renderNotifications();
                    break;
                case 'profile':
                    content.innerHTML = renderProfile();
                    break;
                default:
                    content.innerHTML = renderWelcome();
            }
        }

        // Render Functions
        function renderWelcome() {
            return `
                <article class="welcome-screen" role="article">
                    <header style="text-align: center; animation: fadeIn 1s ease-out;">
                        <img src="assets/moon-logo.png" alt="Luna - Your wellness companion logo featuring a crescent moon" class="logo-large" style="animation: float 3s ease-in-out infinite;">
                        <h1 class="welcome-title" style="font-size: 3.5rem; margin: 1.5rem 0; background: linear-gradient(135deg, #8B7BA8, #B5A5D5, #E8B5D8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold;">Welcome to Luna</h1>
                        <p class="welcome-subtitle" style="font-size: 1.3rem; color: #666; margin-bottom: 3rem;">Your Personal Women's Wellness Companion üåô‚ú®</p>
                    </header>
                    
                    <section class="cta-buttons" style="margin-bottom: 3rem;" aria-label="Account actions">
                        <button class="btn btn-primary" onclick="showScreen('signin')" style="transform: scale(1); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" aria-label="Sign in to your account">
                            <span>Sign In</span>
                            <span aria-hidden="true">‚Üí</span>
                        </button>
                        <button class="btn btn-secondary" onclick="showScreen('signup')" style="transform: scale(1); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" aria-label="Create a new account">
                            <span>Create Account</span>
                            <span aria-hidden="true">+</span>
                        </button>
                    </section>
                    
                    <!-- About/Features Section -->
                    <section style="max-width: 1200px; margin: 0 auto 3rem; padding: 2rem; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);" aria-label="About Luna features">
                        <h2 style="color: var(--accent); text-align: center; margin-bottom: 2rem; font-size: 2rem;">Why Choose Luna?</h2>
                        <div style="display: flex; justify-content: space-between; gap: 1.5rem; flex-wrap: nowrap;">
                            <div style="text-align: center; padding: 1rem; flex: 1; min-width: 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 0.5rem;" role="img" aria-label="Calendar icon">üìÖ</div>
                                <h3 style="color: var(--accent); font-size: 1.1rem; margin-bottom: 0.5rem; white-space: nowrap;">Period Tracking</h3>
                                <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">Track your cycle with accuracy and predict your next period</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; flex: 1; min-width: 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 0.5rem;" role="img" aria-label="Sleep icon">üí§</div>
                                <h3 style="color: var(--accent); font-size: 1.1rem; margin-bottom: 0.5rem; white-space: nowrap;">Sleep Monitor</h3>
                                <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">Monitor sleep patterns and improve rest quality</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; flex: 1; min-width: 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 0.5rem;" role="img" aria-label="Wellness icon">üí™</div>
                                <h3 style="color: var(--accent); font-size: 1.1rem; margin-bottom: 0.5rem; white-space: nowrap;">Wellness Tips</h3>
                                <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">Get personalized wellness tips and health advice</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; flex: 1; min-width: 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 0.5rem;" role="img" aria-label="Journal icon">üìù</div>
                                <h3 style="color: var(--accent); font-size: 1.1rem; margin-bottom: 0.5rem; white-space: nowrap;">Personal Journal</h3>
                                <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">Journal thoughts, feelings, and daily experiences</p>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Footer with Semantic HTML -->
                    <footer style="background: rgba(47, 35, 70, 0.95); backdrop-filter: blur(10px); color: white; padding: 3rem 2rem 2rem; border-radius: 20px 20px 0 0; margin-top: 4rem; box-shadow: 0 -4px 20px rgba(0,0,0,0.15);" role="contentinfo" aria-label="Site footer">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem; max-width: 1200px; margin: 0 auto 2rem;">
                            <section aria-labelledby="about-heading">
                                <h3 id="about-heading" style="color: #B5A5D5; margin-bottom: 1rem; font-size: 1.3rem;">Luna</h3>
                                <p style="color: #ddd; line-height: 1.6; font-size: 0.95rem;">A comprehensive women's wellness companion designed to empower women through health tracking, personalized insights, and supportive resources.</p>
                            </section>
                            <nav aria-labelledby="footer-nav-heading">
                                <h4 id="footer-nav-heading" style="color: #B5A5D5; margin-bottom: 1rem;">Quick Links</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.5rem;">
                                    <li><a href="#signin" onclick="showScreen('signin'); return false;" style="color: #ddd; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#E8B5D8'" onmouseout="this.style.color='#ddd'" aria-label="Go to sign in page">Sign In</a></li>
                                    <li><a href="#signup" onclick="showScreen('signup'); return false;" style="color: #ddd; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#E8B5D8'" onmouseout="this.style.color='#ddd'" aria-label="Go to sign up page">Create Account</a></li>
                                    <li><a href="#about" style="color: #ddd; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#E8B5D8'" onmouseout="this.style.color='#ddd'" aria-label="Learn about Luna">About Us</a></li>
                                    <li><a href="#privacy" style="color: #ddd; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#E8B5D8'" onmouseout="this.style.color='#ddd'" aria-label="Read privacy policy">Privacy Policy</a></li>
                                </ul>
                            </nav>
                            <address style="font-style: normal;" aria-labelledby="contact-heading">
                                <h4 id="contact-heading" style="color: #B5A5D5; margin-bottom: 1rem;">Contact Us</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.7rem; color: #ddd;">
                                    <li style="display: flex; align-items: center; gap: 0.5rem;"><span role="img" aria-label="Email">üìß</span> <a href="mailto:support@luna-wellness.com" style="color: #ddd; text-decoration: none;">support@luna-wellness.com</a></li>
                                    <li style="display: flex; align-items: center; gap: 0.5rem;"><span role="img" aria-label="Phone">üì±</span> <a href="tel:+639123456789" style="color: #ddd; text-decoration: none;">+63 912 345 6789</a></li>
                                    <li style="display: flex; align-items: center; gap: 0.5rem;"><span role="img" aria-label="Website">üåê</span> <a href="https://www.luna-wellness.com" style="color: #ddd; text-decoration: none;" target="_blank" rel="noopener noreferrer">www.luna-wellness.com</a></li>
                                </ul>
                            </address>
                        </div>
                        <div style="border-top: 1px solid rgba(181, 165, 213, 0.3); padding-top: 1.5rem; text-align: center;">
                            <p style="color: #B5A5D5; margin: 0; font-size: 0.9rem;">¬© 2025 Luna. All rights reserved.</p>
                            <p style="color: #888; margin: 0.5rem 0 0; font-size: 0.85rem;">Developed by <strong>Yasmin Ivy Ilagan</strong> | HCI Project</p>
                        </div>
                    </footer>
                </article>
            `;
        }

        function renderSignIn() {
            return `
                <article class="auth-form" role="article">
                    <h2 class="dashboard-title">Sign In to Luna</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Welcome back! Let's continue your wellness journey.</p>
                    <form onsubmit="handleSignIn(event)" aria-label="Sign in form">
                        <div class="form-group">
                            <label for="signin-email" class="form-label">Email or Phone</label>
                            <input type="text" id="signin-email" name="email" class="form-input" placeholder="Enter your email or phone number" required aria-required="true" aria-describedby="signin-email-help">
                            <small id="signin-email-help" style="color: #888; font-size: 0.85rem; display: block; margin-top: 0.25rem;">We'll never share your information</small>
                        </div>
                        <div class="form-group">
                            <label for="signin-password" class="form-label">Password</label>
                            <input type="password" id="signin-password" name="password" class="form-input" placeholder="Enter your password" required aria-required="true" minlength="8">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;" aria-label="Submit sign in form">
                            Sign In
                        </button>
                    </form>
                    <p style="text-align: center; margin-top: 1.5rem;">
                        Don't have an account? <a href="#signup" onclick="showScreen('signup'); return false;" style="color: var(--primary); font-weight: 600; text-decoration: underline;">Sign Up</a>
                    </p>
                </article>
            `;
        }

        function renderSignUp() {
            return `
                <article class="auth-form" role="article">
                    <h2 class="dashboard-title">Create Your Luna Account</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Join thousands of women taking control of their wellness.</p>
                    <form onsubmit="handleSignUp(event)" aria-label="Sign up form">
                        <div class="form-group">
                            <label for="signup-name" class="form-label">Full Name</label>
                            <input type="text" id="signup-name" name="name" class="form-input" placeholder="Enter your full name" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="signup-phone" class="form-label">Phone Number</label>
                            <input type="tel" id="signup-phone" name="phone" class="form-input" placeholder="Enter your phone number" required aria-required="true" pattern="[0-9+\-\s()]+">
                        </div>
                        <div class="form-group">
                            <label for="signup-age" class="form-label">Age</label>
                            <input type="number" id="signup-age" name="age" class="form-input" placeholder="Enter your age" min="13" max="100" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="signup-password" class="form-label">Password</label>
                            <input type="password" id="signup-password" name="password" class="form-input" placeholder="Create a password (min. 8 characters)" minlength="8" required aria-required="true" aria-describedby="password-help">
                            <small id="password-help" style="color: #888; font-size: 0.85rem; display: block; margin-top: 0.25rem;">Must be at least 8 characters long</small>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" required>
                            <span>I agree to the Terms of Service and Privacy Policy</span>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;">
                            Create Account
                        </button>
                    </form>
                    <p style="text-align: center; margin-top: 1.5rem;">
                        Already have an account? <a href="#" onclick="showScreen('signin')" style="color: var(--primary); font-weight: 600;">Sign In</a>
                    </p>
                </div>
            `;
        }

        function renderDashboard() {
            return `
                <div class="dashboard">
                    <button class="back-button" onclick="showScreen('welcome')">‚Üê Back to Home</button>
                    <div class="dashboard-header">
                        <h2 class="dashboard-title">Your Wellness Dashboard</h2>
                        <p style="color: #666;">How are you feeling today?</p>
                    </div>
                    
                    <div class="mood-section">
                        <h3 style="color: var(--accent); margin-bottom: 1rem;">Track Your Mood</h3>
                        <div class="mood-buttons">
                            <button class="mood-btn" data-mood="sad" onclick="showMoodQuote('sad'); selectMood('sad')" style="background: #E74C3C;">üò¢</button>
                            <button class="mood-btn" data-mood="bad" onclick="showMoodQuote('bad'); selectMood('bad')" style="background: #E67E22;">üòü</button>
                            <button class="mood-btn" data-mood="okay" onclick="showMoodQuote('okay'); selectMood('okay')" style="background: #F1C40F;">üòê</button>
                            <button class="mood-btn" data-mood="good" onclick="showMoodQuote('good'); selectMood('good')" style="background: #A4D65E;">üòä</button>
                            <button class="mood-btn" data-mood="great" onclick="showMoodQuote('great'); selectMood('great')" style="background: #5FBF7F;">üòÑ</button>
                        </div>
                        
                        <div class="water-tracker">
                            <span class="water-icon">üíß</span>
                            <input type="range" class="slider" min="0" max="100" value="50" oninput="updateWater(this.value)">
                            <span id="water-amount">50%</span>
                        </div>
                    </div>

                    <div class="features-grid">
                        <div class="feature-card" onclick="showScreen('period')">
                            <img src="assets/period-tracker.png" alt="Period Tracker" class="feature-icon">
                            <h3 class="feature-title">Period Tracker</h3>
                            <p class="feature-desc">Next period in 4 days</p>
                        </div>
                        <div class="feature-card" onclick="showScreen('sleep')">
                            <img src="assets/sleep.png" alt="Sleep Tracker" class="feature-icon">
                            <h3 class="feature-title">Sleep Tracker</h3>
                            <p class="feature-desc">You slept 7h 30m last night</p>
                        </div>
                        <div class="feature-card" onclick="showScreen('wellness')">
                            <img src="assets/wellness.png" alt="Wellness Tips" class="feature-icon">
                            <h3 class="feature-title">Wellness Tips</h3>
                            <p class="feature-desc">Try a 5-min breathing exercise</p>
                        </div>
                        <div class="feature-card" onclick="showScreen('journal')">
                            <img src="assets/journal.png" alt="Journal" class="feature-icon">
                            <h3 class="feature-title">Luna Journal</h3>
                            <p class="feature-desc">Write your thoughts today</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPeriodTracker() {
            const today = new Date().toISOString().split('T')[0];
            const todaySymptoms = periodSymptoms.filter(s => s.date === today);
            
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Period Tracker</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Track your menstrual cycle and symptoms</p>
                    
                    <div class="calendar-container">
                        <h3 style="color: var(--accent); margin-bottom: 1rem;">October 2025</h3>
                        <div class="calendar-grid">
                            ${generateCalendar()}
                        </div>
                    </div>

                    <div style="margin-top: 3rem;">
                        <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">üìù Add Symptoms for Today</h3>
                        <div style="background: var(--light); padding: 2rem; border-radius: 20px; box-shadow: 0 5px 20px var(--shadow);">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'cramps') ? 'active' : ''}" 
                                        onclick="toggleSymptom('cramps')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'cramps') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'cramps') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    üíß Cramps
                                </button>
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'mood-swings') ? 'active' : ''}" 
                                        onclick="toggleSymptom('mood-swings')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'mood-swings') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'mood-swings') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    üòî Mood Swings
                                </button>
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'back-pain') ? 'active' : ''}" 
                                        onclick="toggleSymptom('back-pain')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'back-pain') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'back-pain') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    üí™ Back Pain
                                </button>
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'headache') ? 'active' : ''}" 
                                        onclick="toggleSymptom('headache')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'headache') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'headache') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    ü§ï Headache
                                </button>
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'bloating') ? 'active' : ''}" 
                                        onclick="toggleSymptom('bloating')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'bloating') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'bloating') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    üéà Bloating
                                </button>
                                <button class="symptom-btn ${todaySymptoms.some(s => s.symptom === 'fatigue') ? 'active' : ''}" 
                                        onclick="toggleSymptom('fatigue')" 
                                        style="padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'fatigue') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'fatigue') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-size: 1rem; font-weight: 600;">
                                    üò¥ Fatigue
                                </button>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Flow Level</label>
                                <div style="display: flex; gap: 1rem; justify-content: center;">
                                    <button onclick="setFlowLevel('light')" 
                                            style="padding: 1rem 1.5rem; border: 2px solid ${todaySymptoms.some(s => s.symptom === 'flow-light') ? 'var(--primary)' : '#e0e0e0'}; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'flow-light') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'flow-light') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-weight: 600;">
                                        üíß Light
                                    </button>
                                    <button onclick="setFlowLevel('moderate')" 
                                            style="padding: 1rem 1.5rem; border: 2px solid ${todaySymptoms.some(s => s.symptom === 'flow-moderate') ? 'var(--primary)' : '#e0e0e0'}; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'flow-moderate') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'flow-moderate') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-weight: 600;">
                                        üí¶ Moderate
                                    </button>
                                    <button onclick="setFlowLevel('heavy')" 
                                            style="padding: 1rem 1.5rem; border: 2px solid ${todaySymptoms.some(s => s.symptom === 'flow-heavy') ? 'var(--primary)' : '#e0e0e0'}; border-radius: 15px; background: ${todaySymptoms.some(s => s.symptom === 'flow-heavy') ? 'var(--primary)' : 'white'}; color: ${todaySymptoms.some(s => s.symptom === 'flow-heavy') ? 'white' : 'var(--text)'}; cursor: pointer; transition: all 0.3s; font-weight: 600;">
                                        üåä Heavy
                                    </button>
                                </div>
                            </div>
                            
                            <div style="margin-top: 2rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Additional Notes (Optional)</label>
                                <textarea id="symptom-notes" placeholder="Add any additional notes about how you're feeling today..." 
                                          style="width: 100%; min-height: 100px; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem; font-family: inherit; resize: vertical;">${todaySymptoms.find(s => s.notes)?.notes || ''}</textarea>
                            </div>
                        </div>
                    </div>

                    ${periodSymptoms.length > 0 ? `
                    <div style="margin-top: 3rem;">
                        <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">üìä Recent Symptom Log</h3>
                        <div style="display: grid; gap: 1rem;">
                            ${getRecentSymptoms().map(entry => `
                                <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                        <div>
                                            <p style="font-weight: 600; color: var(--accent); margin: 0 0 0.5rem 0;">${new Date(entry.date).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}</p>
                                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                                ${entry.symptoms.map(s => {
                                                    const icons = {
                                                        'cramps': 'üíß',
                                                        'mood-swings': 'üòî',
                                                        'back-pain': 'üí™',
                                                        'headache': 'ü§ï',
                                                        'bloating': 'üéà',
                                                        'fatigue': 'üò¥',
                                                        'flow-light': 'üíß',
                                                        'flow-moderate': 'üí¶',
                                                        'flow-heavy': 'üåä'
                                                    };
                                                    const labels = {
                                                        'cramps': 'Cramps',
                                                        'mood-swings': 'Mood Swings',
                                                        'back-pain': 'Back Pain',
                                                        'headache': 'Headache',
                                                        'bloating': 'Bloating',
                                                        'fatigue': 'Fatigue',
                                                        'flow-light': 'Light Flow',
                                                        'flow-moderate': 'Moderate Flow',
                                                        'flow-heavy': 'Heavy Flow'
                                                    };
                                                    return `<span style="background: var(--light); padding: 0.3rem 0.8rem; border-radius: 10px; font-size: 0.85rem;">${icons[s]} ${labels[s]}</span>`;
                                                }).join('')}
                                            </div>
                                        </div>
                                    </div>
                                    ${entry.notes ? `<p style="color: #666; margin: 1rem 0 0 0; padding-top: 1rem; border-top: 1px solid #e0e0e0; font-style: italic;">"${entry.notes}"</p>` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>
            `;
        }

        function renderSleepTracker() {
            const latestSleep = sleepData.length > 0 ? sleepData[sleepData.length - 1] : null;
            const totalHours = latestSleep ? latestSleep.hours : 0;
            const totalMinutes = latestSleep ? latestSleep.minutes : 0;
            
            // Calculate average sleep
            let avgHours = 0;
            if (sleepData.length > 0) {
                const totalSleep = sleepData.reduce((sum, sleep) => sum + sleep.hours + (sleep.minutes / 60), 0);
                avgHours = (totalSleep / sleepData.length).toFixed(1);
            }
            
            // Find best sleep
            let bestSleep = { hours: 0, minutes: 0 };
            if (sleepData.length > 0) {
                const best = sleepData.reduce((max, sleep) => {
                    const current = sleep.hours + (sleep.minutes / 60);
                    const maxVal = max.hours + (max.minutes / 60);
                    return current > maxVal ? sleep : max;
                });
                bestSleep = best;
            }
            
            // Calculate circle progress (based on 8 hour goal)
            const sleepPercentage = ((totalHours + totalMinutes / 60) / sleepGoal) * 100;
            const circumference = 2 * Math.PI * 120;
            const offset = circumference - (circumference * Math.min(sleepPercentage, 100) / 100);
            
            // Determine sleep quality message
            let qualityMessage = 'üò¥ Log your sleep!';
            let qualityColor = '#999';
            if (totalHours > 0) {
                const totalSleepHours = totalHours + totalMinutes / 60;
                if (totalSleepHours >= 8) {
                    qualityMessage = 'üíö Excellent sleep!';
                    qualityColor = '#5FBF7F';
                } else if (totalSleepHours >= 7) {
                    qualityMessage = 'üíö Great sleep!';
                    qualityColor = '#5FBF7F';
                } else if (totalSleepHours >= 6) {
                    qualityMessage = 'üíõ Good sleep!';
                    qualityColor = '#F1C40F';
                } else {
                    qualityMessage = '‚ù§Ô∏è Need more rest';
                    qualityColor = '#E74C3C';
                }
            }
            
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Sleep Tracker</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Monitor your sleep patterns</p>
                    
                    <div class="sleep-circle">
                        <svg width="300" height="300" style="position: absolute;">
                            <circle cx="150" cy="150" r="120" fill="none" stroke="#e0e0e0" stroke-width="20"/>
                            <circle cx="150" cy="150" r="120" fill="none" stroke="var(--primary)" stroke-width="20"
                                    stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" 
                                    transform="rotate(-90 150 150)"
                                    style="transition: stroke-dashoffset 1s ease;"/>
                        </svg>
                        <div class="sleep-info">
                            <p style="font-size: 1.2rem; color: #666;">You slept</p>
                            <p class="sleep-hours">${totalHours}h ${totalMinutes}m</p>
                            <p style="color: ${qualityColor};">${qualityMessage}</p>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-top: 2rem; text-align: center;">
                        <div>
                            <p style="font-size: 2rem;">üí§</p>
                            <p style="color: #666; margin: 0.5rem 0;">Average Sleep</p>
                            <p style="font-weight: bold; color: var(--accent);">${avgHours > 0 ? avgHours + ' hrs' : 'No data'}</p>
                        </div>
                        <div>
                            <p style="font-size: 2rem;">üåô</p>
                            <p style="color: #666; margin: 0.5rem 0;">Sleep Goal</p>
                            <p style="font-weight: bold; color: var(--accent);">${sleepGoal} hrs</p>
                        </div>
                        <div>
                            <p style="font-size: 2rem;">‚ú®</p>
                            <p style="color: #666; margin: 0.5rem 0;">Best Night</p>
                            <p style="font-weight: bold; color: var(--accent);">${bestSleep.hours > 0 ? bestSleep.hours + 'h ' + bestSleep.minutes + 'm' : 'No data'}</p>
                        </div>
                    </div>

                    <div style="margin-top: 3rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                        <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">üìù Log Your Sleep</h3>
                        <div style="background: var(--light); padding: 2rem; border-radius: 20px; box-shadow: 0 5px 20px var(--shadow);">
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Hours</label>
                                <input type="number" id="sleep-hours" min="0" max="24" value="7" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1.2rem; text-align: center;">
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Minutes</label>
                                <input type="number" id="sleep-minutes" min="0" max="59" value="30" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1.2rem; text-align: center;">
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Date</label>
                                <input type="date" id="sleep-date" value="${new Date().toISOString().split('T')[0]}" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <button class="btn btn-primary" onclick="saveSleepData()" style="width: 100%; justify-content: center;">
                                üí§ Save Sleep Log
                            </button>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                        <div style="background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 5px 20px var(--shadow);">
                            <h3 style="color: var(--accent); margin-bottom: 1rem; text-align: center;">üåô Set Sleep Goal</h3>
                            <div style="margin-bottom: 1rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Goal (hours per night)</label>
                                <input type="number" id="sleep-goal-input" min="4" max="12" value="${sleepGoal}" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1.2rem; text-align: center;">
                            </div>
                            <button class="btn btn-secondary" onclick="updateSleepGoal()" style="width: 100%; justify-content: center;">
                                ‚úì Update Goal
                            </button>
                        </div>
                    </div>

                    ${sleepData.length > 0 ? `
                    <div style="margin-top: 3rem;">
                        <h3 style="color: var(--accent); margin-bottom: 1rem; text-align: center;">üìä Recent Sleep History</h3>
                        <div style="display: grid; gap: 1rem;">
                            ${sleepData.slice(-7).reverse().map(sleep => `
                                <div style="background: var(--light); padding: 1.5rem; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                                    <div>
                                        <p style="font-weight: 600; color: var(--accent); margin: 0 0 0.5rem 0;">${new Date(sleep.date).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}</p>
                                        <p style="color: #666; margin: 0;">üí§ ${sleep.hours}h ${sleep.minutes}m</p>
                                    </div>
                                    <div style="font-size: 2rem;">
                                        ${(sleep.hours + sleep.minutes / 60) >= 8 ? 'üò¥' : (sleep.hours + sleep.minutes / 60) >= 7 ? 'üôÇ' : 'üòï'}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>
            `;
        }

        function renderWellness() {
            const defaultTips = [
                { icon: 'üßò‚Äç‚ôÄÔ∏è', title: 'Start your day with gentle stretching', description: '5 mins yoga warm-up helps reduce cramps' },
                { icon: 'üö∂‚Äç‚ôÄÔ∏è', title: 'Take a 15-minute walk', description: 'Brisk walking helps boost your mood and balance hormones' },
                { icon: 'üèãÔ∏è‚Äç‚ôÄÔ∏è', title: 'Do a quick home workout', description: 'Light dumbbell exercise improves blood flow' },
                { icon: 'ü§∏‚Äç‚ôÄÔ∏è', title: 'Try light pilates', description: 'Strengthen your body while calming your mind' }
            ];
            
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Wellness Tips</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Personalized wellness recommendations for you</p>
                    
                    <!-- Add Custom Tip Section -->
                    <div style="background: var(--light); padding: 2rem; border-radius: 20px; margin-bottom: 2rem; box-shadow: 0 5px 20px var(--shadow);">
                        <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">‚ûï Add Your Own Wellness Tip</h3>
                        <div style="display: grid; gap: 1rem;">
                            <div>
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Emoji Icon</label>
                                <input type="text" id="wellness-icon" placeholder="üåü" maxlength="2" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1.5rem; text-align: center;">
                            </div>
                            <div>
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Title</label>
                                <input type="text" id="wellness-title" placeholder="e.g., Drink herbal tea" 
                                       style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <div>
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Description</label>
                                <textarea id="wellness-description" placeholder="e.g., Chamomile tea helps reduce stress and promotes better sleep" 
                                          style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem; min-height: 80px; resize: vertical;"></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="addCustomWellnessTip()" style="width: 100%; justify-content: center;">
                                ‚ú® Add Wellness Tip
                            </button>
                        </div>
                    </div>
                    
                    <!-- Default Tips -->
                    <h3 style="color: var(--accent); margin-bottom: 1rem;">üìö Recommended Tips</h3>
                    <div style="display: grid; gap: 1.5rem; margin-bottom: 2rem;">
                        ${defaultTips.map(tip => renderWellnessTip(tip.icon, tip.title, tip.description, false)).join('')}
                    </div>
                    
                    <!-- Custom Tips -->
                    ${customWellnessTips.length > 0 ? `
                        <h3 style="color: var(--accent); margin-bottom: 1rem;">‚ú® Your Custom Tips</h3>
                        <div style="display: grid; gap: 1.5rem;">
                            ${customWellnessTips.map((tip, index) => renderWellnessTip(tip.icon, tip.title, tip.description, true, index)).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function renderWellnessTip(icon, title, description, isCustom = false, index = 0) {
            return `
                <div style="background: ${isCustom ? 'white' : 'var(--light)'}; padding: 1.5rem; border-radius: 15px; display: flex; gap: 1rem; align-items: center; box-shadow: ${isCustom ? '0 4px 15px var(--shadow)' : 'none'};">
                    <div style="font-size: 3rem;">${icon}</div>
                    <div style="flex: 1;">
                        <h3 style="color: var(--accent); margin-bottom: 0.5rem;">${title}</h3>
                        <p style="color: #666;">${description}</p>
                    </div>
                    ${isCustom ? `
                        <button class="btn" onclick="deleteWellnessTip(${index})" style="padding: 0.5rem 1rem; background: #E74C3C; color: white; border: none;">üóëÔ∏è Delete</button>
                    ` : `
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" style="padding: 0.5rem 1rem;">‚ñ∂ Watch</button>
                            <button class="btn btn-secondary" style="padding: 0.5rem 1rem;">Later</button>
                        </div>
                    `}
                </div>
            `;
        }

        function renderJournal() {
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Luna Journal</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Write your thoughts, feelings, and reflections</p>
                    
                    <div style="background: var(--light); padding: 2rem; border-radius: 20px; box-shadow: 0 5px 20px var(--shadow);">
                        <textarea class="journal-area" placeholder="Dear Luna,

Today I feel...

What's on my mind...

Grateful for..."></textarea>

                        <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
                            <button class="btn btn-primary" onclick="saveJournal()">üíæ Save Entry</button>
                            <button class="btn btn-secondary" onclick="clearJournal()">üóëÔ∏è Clear</button>
                        </div>
                    </div>

                    ${journalEntries.length > 0 ? `
                        <div style="margin-top: 3rem;">
                            <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">üìñ Your Journal Entries (${journalEntries.length})</h3>
                            <div style="display: grid; gap: 1.5rem;">
                                ${journalEntries.slice().reverse().map((entry, index) => `
                                    <div style="background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 4px 15px var(--shadow); position: relative;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                            <div>
                                                <p style="color: var(--accent); font-weight: 600; margin: 0 0 0.3rem 0;">üìÖ ${entry.displayDate || new Date(entry.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>
                                                <p style="color: #999; font-size: 0.9rem; margin: 0;">üïê ${new Date(entry.date).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}</p>
                                            </div>
                                            <button onclick="deleteJournalEntry(${journalEntries.length - 1 - index})" 
                                                    style="background: #E74C3C; color: white; border: none; padding: 0.5rem 1rem; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                                                üóëÔ∏è Delete
                                            </button>
                                        </div>
                                        <div style="border-top: 2px solid var(--light); padding-top: 1rem;">
                                            <p style="color: #333; line-height: 1.8; white-space: pre-wrap; font-family: 'Georgia', serif;">${entry.entry}</p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : `
                        <div style="margin-top: 3rem; text-align: center; padding: 3rem; background: var(--light); border-radius: 20px;">
                            <p style="font-size: 3rem; margin-bottom: 1rem;">üìù</p>
                            <p style="color: #666; font-size: 1.1rem;">No journal entries yet. Start writing to see them here!</p>
                        </div>
                    `}
                </div>
            `;
        }

        function renderSettings() {
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Settings</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Manage your account and preferences</p>
                    
                    <div class="settings-list">
                        <div class="setting-item" onclick="editProfile()">
                            <div>
                                <h3 style="color: var(--accent);">‚úèÔ∏è Edit Profile</h3>
                                <p style="color: #666; font-size: 0.9rem;">Update your personal information</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                        <div class="setting-item">
                            <div>
                                <h3 style="color: var(--accent);">üîî Notifications</h3>
                                <p style="color: #666; font-size: 0.9rem;">Manage reminders and alerts</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                        <div class="setting-item">
                            <div>
                                <h3 style="color: var(--accent);">üîí Privacy & Security</h3>
                                <p style="color: #666; font-size: 0.9rem;">Control your data and privacy</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                        <div class="setting-item">
                            <div>
                                <h3 style="color: var(--accent);">üé® App Theme</h3>
                                <p style="color: #666; font-size: 0.9rem;">Customize your experience</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                        <div class="setting-item">
                            <div>
                                <h3 style="color: var(--accent);">‚ùì Help & Support</h3>
                                <p style="color: #666; font-size: 0.9rem;">Get help and contact us</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                        <div class="setting-item">
                            <div>
                                <h3 style="color: var(--accent);">üí¨ Feedback</h3>
                                <p style="color: #666; font-size: 0.9rem;">Share your thoughts with us</p>
                            </div>
                            <span>‚Üí</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAnalytics() {
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Data Analytics & Insights</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Track your wellness patterns and trends</p>
                    
                    <div style="display: grid; gap: 2rem;">
                        <!-- Menstrual Cycle Trend -->
                        <div style="background: var(--light); padding: 2rem; border-radius: 20px;">
                            <h3 style="color: var(--accent); margin-bottom: 1.5rem;">üìä Menstrual Cycle Trend</h3>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                                <div style="background: #FFB5C5; padding: 1rem; border-radius: 15px; text-align: center;">
                                    <p style="font-size: 0.9rem; margin: 0 0 0.5rem 0; font-weight: 600;">Oct 3-9</p>
                                    <p style="margin: 0; color: #8B4A5A;">Menstrual</p>
                                </div>
                                <div style="background: #FFD5E5; padding: 1rem; border-radius: 15px; text-align: center;">
                                    <p style="font-size: 0.9rem; margin: 0 0 0.5rem 0; font-weight: 600;">Oct 10-17</p>
                                    <p style="margin: 0; color: #8B5A6A;">Follicular</p>
                                </div>
                                <div style="background: #C5E8C5; padding: 1rem; border-radius: 15px; text-align: center;">
                                    <p style="font-size: 0.9rem; margin: 0 0 0.5rem 0; font-weight: 600;">Oct 18-24</p>
                                    <p style="margin: 0; color: #4A7A4A;">Ovulation</p>
                                </div>
                                <div style="background: #FFE8B5; padding: 1rem; border-radius: 15px; text-align: center;">
                                    <p style="font-size: 0.9rem; margin: 0 0 0.5rem 0; font-weight: 600;">Oct 25-31</p>
                                    <p style="margin: 0; color: #8B7A4A;">Luteal</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sleep Pattern Chart -->
                        <div style="background: var(--light); padding: 2rem; border-radius: 20px;">
                            <h3 style="color: var(--accent); margin-bottom: 1.5rem;">üí§ Sleep Pattern (7 Days)</h3>
                            <div style="display: flex; gap: 15px; align-items: flex-end; height: 280px; padding: 0 20px 0 60px; position: relative; background: white; border-radius: 15px; padding-top: 40px;">
                                <!-- Y-axis labels -->
                                <div style="position: absolute; left: 10px; top: 40px; bottom: 40px; display: flex; flex-direction: column; justify-content: space-between; font-size: 0.8rem; color: #888; font-weight: 600;">
                                    <span>10h</span>
                                    <span>8h</span>
                                    <span>6h</span>
                                    <span>4h</span>
                                    <span>2h</span>
                                    <span>0h</span>
                                </div>
                                <!-- Mon -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 188px; background: linear-gradient(180deg, #FF69B4, #FF1493); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(255,105,180,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(255,105,180,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255,105,180,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #FF1493; white-space: nowrap;">7h 30m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Mon</span>
                                </div>
                                <!-- Tue -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 150px; background: linear-gradient(180deg, #B5A5D5, #9B8AB8); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(181,165,213,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(181,165,213,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(181,165,213,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #8B7BA8; white-space: nowrap;">6h 0m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Tue</span>
                                </div>
                                <!-- Wed -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 213px; background: linear-gradient(180deg, #FF69B4, #FF1493); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(255,105,180,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(255,105,180,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255,105,180,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #FF1493; white-space: nowrap;">8h 30m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Wed</span>
                                </div>
                                <!-- Thu -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 200px; background: linear-gradient(180deg, #B5A5D5, #9B8AB8); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(181,165,213,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(181,165,213,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(181,165,213,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #8B7BA8; white-space: nowrap;">8h 0m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Thu</span>
                                </div>
                                <!-- Fri -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 138px; background: linear-gradient(180deg, #B5A5D5, #9B8AB8); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(181,165,213,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(181,165,213,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(181,165,213,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #8B7BA8; white-space: nowrap;">5h 30m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Fri</span>
                                </div>
                                <!-- Sat -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 225px; background: linear-gradient(180deg, #B5A5D5, #9B8AB8); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(181,165,213,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(181,165,213,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(181,165,213,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #8B7BA8; white-space: nowrap;">9h 0m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Sat</span>
                                </div>
                                <!-- Sun -->
                                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 0;">
                                    <div style="width: 100%; max-width: 70px; height: 206px; background: linear-gradient(180deg, #FF69B4, #FF1493); border-radius: 12px 12px 0 0; box-shadow: 0 4px 15px rgba(255,105,180,0.4); position: relative; transition: all 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 6px 20px rgba(255,105,180,0.5)'" onmouseleave="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255,105,180,0.4)'">
                                        <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 700; color: #FF1493; white-space: nowrap;">8h 15m</span>
                                    </div>
                                    <span style="font-size: 0.9rem; font-weight: 700; color: #555;">Sun</span>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Statistics -->
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;">
                            <div style="background: white; padding: 2rem; border-radius: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                                <p style="font-size: 2.5rem; margin: 0;">üìÖ</p>
                                <p style="color: #666; margin: 1rem 0 0.5rem 0; font-size: 0.9rem;">Average Cycle Length</p>
                                <p style="font-size: 1.8rem; font-weight: bold; color: var(--accent); margin: 0;">28 days</p>
                            </div>
                            <div style="background: white; padding: 2rem; border-radius: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                                <p style="font-size: 2.5rem; margin: 0;">üí§</p>
                                <p style="color: #666; margin: 1rem 0 0.5rem 0; font-size: 0.9rem;">Average Sleep</p>
                                <p style="font-size: 1.8rem; font-weight: bold; color: var(--accent); margin: 0;">7.8 hrs</p>
                            </div>
                            <div style="background: white; padding: 2rem; border-radius: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                                <p style="font-size: 2.5rem; margin: 0;">üòä</p>
                                <p style="color: #666; margin: 1rem 0 0.5rem 0; font-size: 0.9rem;">Most Common Mood</p>
                                <p style="font-size: 1.8rem; font-weight: bold; color: var(--accent); margin: 0;">Happy</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Render sleep chart after page loads
            setTimeout(renderSleepChart, 100);
        }
        
        function renderSleepChart() {
            const chartContainer = document.getElementById('sleepChart');
            if (!chartContainer) return;
            
            // Get last 7 days dates
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const maxHours = 10;
            const today = new Date();
            
            // Create chart bars with real data
            let barsHTML = '<div style="display: flex; gap: 1rem; align-items: flex-end; justify-content: center; height: 100%; padding-left: 40px; flex: 1;">';
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateString = date.toISOString().split('T')[0];
                const dayIndex = (date.getDay() + 6) % 7; // Convert Sunday=0 to Monday=0
                
                // Find sleep data for this date
                const dayData = sleepData.find(s => s.date === dateString);
                const hours = dayData ? (dayData.hours + (dayData.minutes / 60)) : 0;
                const heightPercent = Math.max((hours / maxHours) * 100, 2); // Minimum 2% to show something
                const barColor = hours >= sleepGoal ? '#8B7BA8' : '#B5A5D5';
                const displayHours = hours > 0 ? `${Math.floor(hours)}h ${Math.round((hours % 1) * 60)}m` : '';
                
                barsHTML += `
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem; flex: 1; max-width: 80px;">
                        <div style="position: relative; width: 100%; display: flex; flex-direction: column; justify-content: flex-end; height: 100%;">
                            ${hours > 0 ? `
                            <div style="
                                width: 100%; 
                                height: ${heightPercent}%; 
                                background: linear-gradient(180deg, ${barColor}, ${barColor}dd);
                                border-radius: 10px 10px 0 0;
                                box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                                transition: all 0.3s;
                                position: relative;
                                cursor: pointer;
                            " 
                            onmouseenter="this.style.transform='scaleY(1.05)'; this.style.filter='brightness(1.1)'"
                            onmouseleave="this.style.transform='scaleY(1)'; this.style.filter='brightness(1)'">
                                <span style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 600; color: var(--accent); white-space: nowrap;">${displayHours}</span>
                            </div>
                            ` : ''}
                        </div>
                        <span style="font-size: 0.85rem; font-weight: 600; color: #666;">${days[dayIndex]}</span>
                    </div>
                `;
            }
            
            barsHTML += '</div>';
            
            // Find the container and update only the bars section
            const containerHTML = chartContainer.innerHTML;
            if (containerHTML.includes('<!-- Bars will be inserted here -->')) {
                chartContainer.innerHTML = containerHTML.split('<!-- Bars will be inserted here -->')[0] + barsHTML;
            } else {
                // If bars already exist, replace the entire flex container
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = containerHTML;
                const existingBars = tempDiv.querySelector('div[style*="padding-left: 40px"]');
                if (existingBars) {
                    existingBars.outerHTML = barsHTML;
                    chartContainer.innerHTML = tempDiv.innerHTML;
                }
            }
        }

        function renderNotifications() {
            const customNotifications = JSON.parse(localStorage.getItem('lunaCustomNotifications') || '[]');
            
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">Notifications</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Stay updated with your wellness reminders</p>
                    
                    <!-- Add Notification Form -->
                    <div style="background: var(--light); padding: 2rem; border-radius: 20px; margin-bottom: 2rem; max-width: 800px; margin: 0 auto 2rem;">
                        <h3 style="color: var(--accent); margin-bottom: 1.5rem; text-align: center;">‚ûï Add Custom Reminder</h3>
                        <div style="display: grid; gap: 1rem;">
                            <div>
                                <label for="notif-title" style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Title</label>
                                <input type="text" id="notif-title" placeholder="e.g., Meditation Reminder" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <div>
                                <label for="notif-message" style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Message</label>
                                <textarea id="notif-message" placeholder="e.g., Take 10 minutes to meditate" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem; min-height: 80px; font-family: inherit; resize: vertical;"></textarea>
                            </div>
                            <div>
                                <label for="notif-emoji" style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Emoji (Optional)</label>
                                <input type="text" id="notif-emoji" placeholder="e.g., üßò‚Äç‚ôÄÔ∏è" maxlength="2" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <button onclick="addCustomNotification()" class="btn btn-primary" style="width: 100%; justify-content: center; margin-top: 1rem;">
                                Add Reminder
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: grid; gap: 1.5rem; max-width: 800px; margin: 0 auto;">
                        <!-- Default Notifications -->
                        <div style="background: #FFE5E5; padding: 1.5rem; border-radius: 20px; display: flex; gap: 1rem; align-items: center;">
                            <div style="font-size: 3rem;">üíó</div>
                            <div style="flex: 1;">
                                <h3 style="margin: 0 0 0.5rem 0; color: var(--accent);">Period Reminder</h3>
                                <p style="margin: 0; color: #666;">Your period may start in 3 days ü©∏</p>
                            </div>
                        </div>
                        <div style="background: #E5D4E8; padding: 1.5rem; border-radius: 20px; display: flex; gap: 1rem; align-items: center;">
                            <div style="font-size: 3rem;">üí§</div>
                            <div style="flex: 1;">
                                <h3 style="margin: 0 0 0.5rem 0; color: var(--accent);">Sleep Tracker</h3>
                                <p style="margin: 0; color: #666;">Luna says: Time to rest - track your sleep now</p>
                            </div>
                        </div>
                        <div style="background: #D4E5F1; padding: 1.5rem; border-radius: 20px; display: flex; gap: 1rem; align-items: center;">
                            <div style="font-size: 3rem;">üíß</div>
                            <div style="flex: 1;">
                                <h3 style="margin: 0 0 0.5rem 0; color: var(--accent);">Water Reminder</h3>
                                <p style="margin: 0; color: #666;">Don't forget to drink water. Stay hydrated!</p>
                            </div>
                        </div>
                        <div style="background: #D4F1D4; padding: 1.5rem; border-radius: 20px; display: flex; gap: 1rem; align-items: center;">
                            <div style="font-size: 3rem;">üßò‚Äç‚ôÄÔ∏è</div>
                            <div style="flex: 1;">
                                <h3 style="margin: 0 0 0.5rem 0; color: var(--accent);">Wellness Tip</h3>
                                <p style="margin: 0; color: #666;">Try light yoga to ease cramps today</p>
                            </div>
                        </div>
                        
                        <!-- Custom Notifications -->
                        ${customNotifications.map((notif, index) => `
                            <div style="background: linear-gradient(135deg, #F8F5FB, #E8D4F1); padding: 1.5rem; border-radius: 20px; display: flex; gap: 1rem; align-items: center; position: relative;">
                                <div style="font-size: 3rem;">${notif.emoji || 'üîî'}</div>
                                <div style="flex: 1;">
                                    <h3 style="margin: 0 0 0.5rem 0; color: var(--accent);">${notif.title}</h3>
                                    <p style="margin: 0; color: #666;">${notif.message}</p>
                                </div>
                                <button onclick="deleteCustomNotification(${index})" style="position: absolute; top: 1rem; right: 1rem; background: rgba(231, 76, 60, 0.1); color: #E74C3C; border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; transition: all 0.3s;" onmouseover="this.style.background='#E74C3C'; this.style.color='white'" onmouseout="this.style.background='rgba(231, 76, 60, 0.1)'; this.style.color='#E74C3C'">√ó</button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderProfile() {
            const savedName = localStorage.getItem('userName') || 'Yasmin Ivy Ilagan';
            const savedEmail = localStorage.getItem('userEmail') || 'ilaganyasmin@gmail.com';
            const savedAge = localStorage.getItem('userAge') || '20';
            const savedPhoto = localStorage.getItem('profilePhoto');
            
            const photoHTML = savedPhoto 
                ? `<img src="${savedPhoto}" id="profilePhotoDisplay" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; margin: 0 auto 1rem; display: block; box-shadow: 0 4px 15px rgba(0,0,0,0.2);" alt="Profile">`
                : `<div id="profilePhotoDisplay" style="width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 4rem; color: white;">üë§</div>`;
            
            return `
                <div>
                    <button class="back-button" onclick="showScreen('dashboard')">‚Üê Back to Dashboard</button>
                    <h2 class="dashboard-title">My Profile</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 2rem;">Manage your personal information</p>
                    
                    <div style="max-width: 600px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 3rem; position: relative;">
                            ${photoHTML}
                            <input type="file" id="profilePhotoUpload" accept="image/*" style="display: none;" onchange="handleProfilePhotoUpload(event)">
                            <button onclick="document.getElementById('profilePhotoUpload').click()" style="background: var(--accent); color: white; border: none; padding: 0.5rem 1.5rem; border-radius: 25px; cursor: pointer; font-size: 0.9rem; margin-top: 0.5rem; box-shadow: 0 4px 10px rgba(107, 91, 140, 0.3); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">üì∑ Upload Photo</button>
                            <h3 style="color: var(--accent); margin: 1rem 0 0.5rem 0;">Welcome, ${savedName}!</h3>
                            <p style="color: #666;">Member since 2025</p>
                        </div>

                        <div style="background: var(--light); padding: 2rem; border-radius: 20px;">
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Full Name</label>
                                <input type="text" id="profileName" value="${savedName}" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Email</label>
                                <input type="email" id="profileEmail" value="${savedEmail}" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; color: var(--accent); font-weight: 600; margin-bottom: 0.5rem;">Age</label>
                                <input type="number" id="profileAge" value="${savedAge}" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 15px; font-size: 1rem;">
                            </div>
                            <button class="btn btn-primary" style="width: 100%; justify-content: center; margin-top: 1rem;" onclick="saveProfileChanges()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Handle Profile Photo Upload
        function handleProfilePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const photoData = e.target.result;
                    localStorage.setItem('profilePhoto', photoData);
                    
                    // Update display immediately
                    const displayElement = document.getElementById('profilePhotoDisplay');
                    if (displayElement) {
                        displayElement.outerHTML = `<img src="${photoData}" id="profilePhotoDisplay" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; margin: 0 auto 1rem; display: block; box-shadow: 0 4px 15px rgba(0,0,0,0.2);" alt="Profile">`;
                    }
                    
                    alert('‚úÖ Profile photo uploaded successfully!');
                };
                reader.readAsDataURL(file);
            }
        }

        // Save Profile Changes Function
        function saveProfileChanges() {
            const name = document.getElementById('profileName').value;
            const email = document.getElementById('profileEmail').value;
            const age = document.getElementById('profileAge').value;
            
            localStorage.setItem('userName', name);
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userAge', age);
            
            alert('‚úÖ Profile updated successfully!');
            showScreen('profile');
        }

        // Helper Functions
        function generateCalendar() {
            let html = '';
            const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
            
            // Day headers
            days.forEach(day => {
                html += `<div style="text-align: center; font-weight: bold; padding: 0.5rem;">${day}</div>`;
            });

            // Calendar days (simplified)
            for (let i = 1; i <= 31; i++) {
                let bgColor = '#f0f0f0';
                if (i >= 3 && i <= 9) bgColor = '#FFB5C5'; // Menstrual
                else if (i >= 10 && i <= 17) bgColor = '#FFD5E5'; // Follicular
                else if (i >= 18 && i <= 24) bgColor = '#C5E8C5'; // Ovulation
                else if (i >= 25) bgColor = '#FFE8B5'; // Luteal

                html += `<div class="calendar-day" style="background: ${bgColor};">${i}</div>`;
            }

            return html;
        }

        // Event Handlers
        function handleSignIn(e) {
            e.preventDefault();
            currentUser = { name: 'User' };
            updateNavForLoggedIn();
            showMessage('success', 'Welcome back! Signed in successfully.');
            setTimeout(() => showScreen('dashboard'), 500);
        }

        function handleSignUp(e) {
            e.preventDefault();
            currentUser = { name: 'User' };
            updateNavForLoggedIn();
            showMessage('success', 'Account created successfully! Welcome to Luna.');
            setTimeout(() => showScreen('dashboard'), 500);
        }
        
        function updateNavForLoggedIn() {
            const nav = document.getElementById('main-nav');
            const logoutBtn = document.getElementById('logout-btn');
            
            nav.classList.remove('logged-out');
            nav.style.display = 'flex';
            if (logoutBtn) logoutBtn.style.display = 'block';
        }
        
        function updateNavForLoggedOut() {
            const nav = document.getElementById('main-nav');
            const logoutBtn = document.getElementById('logout-btn');
            
            nav.classList.add('logged-out');
            if (logoutBtn) logoutBtn.style.display = 'none';
        }

        function selectMood(mood) {
            const today = new Date().toISOString().split('T')[0];
            moodData.push({ mood, date: today });
            localStorage.setItem('lunaMoodData', JSON.stringify(moodData));
            
            const moodEmojis = {
                'sad': 'üò¢',
                'bad': 'üòü',
                'okay': 'üòê',
                'good': 'üòä',
                'great': 'üòÑ'
            };
            showMessage('success', `Mood logged: ${moodEmojis[mood]} ${mood.charAt(0).toUpperCase() + mood.slice(1)}`);
        }

        function updateWater(value) {
            document.getElementById('water-amount').textContent = value + '%';
            // Save water intake to localStorage
            localStorage.setItem('lunaWaterIntake', value);
            
            // Show success message
            const glasses = Math.round(value / 12.5); // 8 glasses = 100%
            showMessage('success', `üíß Water intake: ${value}% (${glasses} glasses)`);
        }

        function saveJournal() {
            const entry = document.querySelector('.journal-area').value;
            if (entry.trim()) {
                const today = new Date();
                journalEntries.push({ 
                    entry, 
                    date: today.toISOString(),
                    displayDate: today.toLocaleDateString('en-US', { 
                        weekday: 'short', 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric' 
                    })
                });
                localStorage.setItem('lunaJournalEntries', JSON.stringify(journalEntries));
                showMessage('success', 'Journal entry saved successfully! üìù');
                document.querySelector('.journal-area').value = '';
            } else {
                showMessage('error', 'Please write something before saving!');
            }
        }

        function clearJournal() {
            document.querySelector('.journal-area').value = '';
        }

        function viewEntries() {
            showMessage('success', `You have ${journalEntries.length} journal entries.`);
        }
        
        function deleteJournalEntry(index) {
            if (confirm('Are you sure you want to delete this journal entry?')) {
                journalEntries.splice(index, 1);
                localStorage.setItem('lunaJournalEntries', JSON.stringify(journalEntries));
                showMessage('success', 'Journal entry deleted!');
                setTimeout(() => showScreen('journal'), 500);
            }
        }
        
        function addCustomWellnessTip() {
            const emoji = document.getElementById('wellness-emoji').value.trim();
            const title = document.getElementById('wellness-title').value.trim();
            const description = document.getElementById('wellness-description').value.trim();
            
            if (!emoji || !title || !description) {
                showMessage('error', 'Please fill in all fields!');
                return;
            }
            
            customWellnessTips.push({ emoji, title, description });
            localStorage.setItem('lunaCustomWellnessTips', JSON.stringify(customWellnessTips));
            
            showMessage('success', `Wellness tip "${title}" added!`);
            setTimeout(() => showScreen('wellness'), 500);
        }
        
        function deleteWellnessTip(index) {
            if (confirm('Are you sure you want to delete this wellness tip?')) {
                const tipTitle = customWellnessTips[index].title;
                customWellnessTips.splice(index, 1);
                localStorage.setItem('lunaCustomWellnessTips', JSON.stringify(customWellnessTips));
                showMessage('success', `"${tipTitle}" deleted!`);
                setTimeout(() => showScreen('wellness'), 500);
            }
        }

        function saveSleepData() {
            const hours = parseInt(document.getElementById('sleep-hours').value) || 0;
            const minutes = parseInt(document.getElementById('sleep-minutes').value) || 0;
            const date = document.getElementById('sleep-date').value;
            
            if (hours === 0 && minutes === 0) {
                showMessage('error', 'Please enter sleep duration!');
                return;
            }
            
            // Check if entry for this date already exists
            const existingIndex = sleepData.findIndex(entry => entry.date === date);
            
            if (existingIndex >= 0) {
                // Update existing entry
                sleepData[existingIndex] = { hours, minutes, date };
                showMessage('success', `Sleep data updated for ${new Date(date).toLocaleDateString()}!`);
            } else {
                // Add new entry
                sleepData.push({ hours, minutes, date });
                showMessage('success', `Sleep logged: ${hours}h ${minutes}m on ${new Date(date).toLocaleDateString()}!`);
            }
            
            // Save to localStorage
            localStorage.setItem('lunaSleepData', JSON.stringify(sleepData));
            
            // Refresh the sleep tracker view
            setTimeout(() => showScreen('sleep'), 500);
        }
        
        function updateSleepGoal() {
            const goal = parseInt(document.getElementById('sleep-goal-input').value);
            
            if (goal < 4 || goal > 12) {
                showMessage('error', 'Please set a goal between 4 and 12 hours!');
                return;
            }
            
            sleepGoal = goal;
            localStorage.setItem('lunaSleepGoal', goal);
            showMessage('success', `Sleep goal updated to ${goal} hours per night!`);
            
            // Refresh the sleep tracker view
            setTimeout(() => showScreen('sleep'), 500);
        }
        
        function logSleep() {
            // Legacy function - scroll to log section
            const logSection = document.querySelector('input[id="sleep-hours"]');
            if (logSection) {
                logSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                logSection.focus();
            }
        }

        function setSleepGoal() {
            // Legacy function - scroll to goal section
            const goalSection = document.querySelector('input[id="sleep-goal-input"]');
            if (goalSection) {
                goalSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                goalSection.focus();
            }
        }

        function toggleSymptom(symptom) {
            const today = new Date().toISOString().split('T')[0];
            const existingIndex = periodSymptoms.findIndex(s => s.date === today && s.symptom === symptom);
            
            if (existingIndex >= 0) {
                // Remove symptom
                periodSymptoms.splice(existingIndex, 1);
                showMessage('success', `Symptom removed!`);
            } else {
                // Add symptom
                const notes = document.getElementById('symptom-notes')?.value || '';
                periodSymptoms.push({ symptom, date: today, notes });
                
                const labels = {
                    'cramps': 'Cramps',
                    'mood-swings': 'Mood Swings',
                    'back-pain': 'Back Pain',
                    'headache': 'Headache',
                    'bloating': 'Bloating',
                    'fatigue': 'Fatigue'
                };
                showMessage('success', `${labels[symptom]} logged for today!`);
            }
            
            // Save to localStorage
            localStorage.setItem('lunaPeriodSymptoms', JSON.stringify(periodSymptoms));
            
            // Refresh the view
            setTimeout(() => showScreen('period'), 300);
        }
        
        function setFlowLevel(level) {
            const today = new Date().toISOString().split('T')[0];
            
            // Remove any existing flow level for today
            periodSymptoms = periodSymptoms.filter(s => s.date !== today || !s.symptom.startsWith('flow-'));
            
            // Add new flow level
            const notes = document.getElementById('symptom-notes')?.value || '';
            periodSymptoms.push({ symptom: `flow-${level}`, date: today, notes });
            
            const labels = {
                'light': 'üíß Light',
                'moderate': 'üí¶ Moderate',
                'heavy': 'üåä Heavy'
            };
            showMessage('success', `Flow level set to ${labels[level]}!`);
            
            // Save to localStorage
            localStorage.setItem('lunaPeriodSymptoms', JSON.stringify(periodSymptoms));
            
            // Refresh the view
            setTimeout(() => showScreen('period'), 300);
        }
        
        function getRecentSymptoms() {
            // Group symptoms by date
            const grouped = {};
            periodSymptoms.forEach(entry => {
                if (!grouped[entry.date]) {
                    grouped[entry.date] = {
                        date: entry.date,
                        symptoms: [],
                        notes: entry.notes || ''
                    };
                }
                grouped[entry.date].symptoms.push(entry.symptom);
                if (entry.notes) {
                    grouped[entry.date].notes = entry.notes;
                }
            });
            
            // Convert to array and sort by date (newest first)
            return Object.values(grouped)
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 10); // Show last 10 days
        }
        
        function editProfile() {
            showMessage('success', 'Profile editor coming soon!');
        }
        
        // Custom Notification Functions
        function addCustomNotification() {
            const title = document.getElementById('notif-title').value.trim();
            const message = document.getElementById('notif-message').value.trim();
            const emoji = document.getElementById('notif-emoji').value.trim();
            
            if (!title) {
                showMessage('error', 'Please enter a title for the reminder!');
                return;
            }
            
            if (!message) {
                showMessage('error', 'Please enter a message for the reminder!');
                return;
            }
            
            const customNotifications = JSON.parse(localStorage.getItem('lunaCustomNotifications') || '[]');
            customNotifications.push({
                title: title,
                message: message,
                emoji: emoji || 'üîî',
                date: new Date().toISOString()
            });
            
            localStorage.setItem('lunaCustomNotifications', JSON.stringify(customNotifications));
            showMessage('success', `‚úÖ Reminder "${title}" added successfully!`);
            
            // Clear form
            document.getElementById('notif-title').value = '';
            document.getElementById('notif-message').value = '';
            document.getElementById('notif-emoji').value = '';
            
            // Refresh notifications
            setTimeout(() => showScreen('notifications'), 500);
        }
        
        function deleteCustomNotification(index) {
            const customNotifications = JSON.parse(localStorage.getItem('lunaCustomNotifications') || '[]');
            const deletedTitle = customNotifications[index].title;
            customNotifications.splice(index, 1);
            localStorage.setItem('lunaCustomNotifications', JSON.stringify(customNotifications));
            showMessage('success', `Reminder "${deletedTitle}" deleted!`);
            setTimeout(() => showScreen('notifications'), 500);
        }

        function logout() {
            currentUser = null;
            updateNavForLoggedOut();
            showMessage('success', 'Logged out successfully.');
            setTimeout(() => showScreen('welcome'), 1000);
        }

        function showMessage(type, message) {
            const content = document.getElementById('main-content');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = message;
            content.insertBefore(messageDiv, content.firstChild);
            
            setTimeout(() => messageDiv.remove(), 3000);
        }

        // Initialize app
        // Load saved data from localStorage
        function loadSavedData() {
            const savedSleepData = localStorage.getItem('lunaSleepData');
            if (savedSleepData) {
                try {
                    sleepData = JSON.parse(savedSleepData);
                } catch (e) {
                    console.error('Error loading sleep data:', e);
                }
            }
            
            const savedSleepGoal = localStorage.getItem('lunaSleepGoal');
            if (savedSleepGoal) {
                sleepGoal = parseInt(savedSleepGoal);
            }
            
            const savedMoodData = localStorage.getItem('lunaMoodData');
            if (savedMoodData) {
                try {
                    moodData = JSON.parse(savedMoodData);
                } catch (e) {
                    console.error('Error loading mood data:', e);
                }
            }
            
            const savedJournalEntries = localStorage.getItem('lunaJournalEntries');
            if (savedJournalEntries) {
                try {
                    journalEntries = JSON.parse(savedJournalEntries);
                } catch (e) {
                    console.error('Error loading journal entries:', e);
                }
            }
            
            const savedPeriodSymptoms = localStorage.getItem('lunaPeriodSymptoms');
            if (savedPeriodSymptoms) {
                try {
                    periodSymptoms = JSON.parse(savedPeriodSymptoms);
                } catch (e) {
                    console.error('Error loading period symptoms:', e);
                }
            }
            
            const savedCustomWellnessTips = localStorage.getItem('lunaCustomWellnessTips');
            if (savedCustomWellnessTips) {
                try {
                    customWellnessTips = JSON.parse(savedCustomWellnessTips);
                } catch (e) {
                    console.error('Error loading custom wellness tips:', e);
                }
            }
        }
        
        // Load data on page load
        loadSavedData();
        showScreen('welcome');
    </script>
</body>
</html>
